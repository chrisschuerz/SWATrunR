<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="SWATrunR">
<title>Getting started with SWATrunR • SWATplusR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with SWATrunR">
<meta property="og:description" content="SWATrunR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">SWATplusR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/SWATrunR.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/par_sampl_calib.html">Parameter sampling and model calibration</a>
    <a class="dropdown-item" href="../articles/par_sensitivity.html">Parameter sensitivity analysis</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/chrisschuerz/SWATrunR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting started with SWATrunR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/chrisschuerz/SWATrunR/blob/HEAD/vignettes/SWATrunR.Rmd" class="external-link"><code>vignettes/SWATrunR.Rmd</code></a></small>
      <div class="d-none name"><code>SWATrunR.Rmd</code></div>
    </div>

    
    
<p><strong>Note:</strong> The <code>SWATrunR</code> GitHub is currently
not up to date with the current <code>SWATrunR</code> version &gt; 0.9.0
due to significant changes in the output definition and the
returning/saving of simulation outputs. Some parts of the website
content are still useful. The website will be updated in the following
days.</p>
<div class="section level2">
<h2 id="loading-swatrunr">Loading <code>SWATrunR</code><a class="anchor" aria-label="anchor" href="#loading-swatrunr"></a>
</h2>
<p>If you did not install <code>SWATrunR</code> yet you can do that now
running the following lines in <code>R</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># If the package remotes is not installed run first:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'remotes'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'chrisschuerz/SWATrunR'</span><span class="op">)</span></span></code></pre></div>
<p>Before we start exploring the package load <code>SWATrunR</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/chrisschuerz/SWATrunR" class="external-link">SWATrunR</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="swat-demo-projects">SWAT demo projects<a class="anchor" aria-label="anchor" href="#swat-demo-projects"></a>
</h2>
<p><code>SWATdata</code> provides a set of fast running, lightweight
SWAT2012 and SWAT+ model setups of a head watershed of the Little River
Experimental Watershed [LREW; <span class="citation">Bosch et al. (<a href="#ref-Bosch2007">2007</a>)</span>]. Additionally, discharge
observations at the outlet of the demo catchment (gauge J of LREW) and
spatial information of the SWAT model setups are available from
<code>SWATdata</code>. The <a href="https://github.com/chrisschuerz/SWATdata#swatdata-" class="external-link"><code>SWATdata</code></a>
GitHub page gives an overview of the available data sets.</p>
<div class="section level3">
<h3 id="loading-a-swat-project">Loading a SWAT project<a class="anchor" aria-label="anchor" href="#loading-a-swat-project"></a>
</h3>
<p>Demo data can be loaded with the function <code><a href="../reference/load_demo.html">load_demo()</a></code>.
With the input argument <code>dataset</code> you can define which SWAT
project data you want to load. To load a SWAT project folder define
<code>dataset = 'project'</code>. The <code>path</code> defines the path
on your local hard drive where you want to store the SWAT project
folder. <strong><em>Please try to avoid blanks in your path
names</em></strong> (e.g. ‘C:/this is a/path with blanks’).
<strong><em>This can cause issues when running the model. Try to use
e.g.</em></strong> ’_’ <strong><em>in your path names
instead.</em></strong> As the SWAT project is available as SWAT+ and as
SWAT2012 project you have to specify the <code>version</code> of the
SWAT project you want to load. Use <code>version = 'plus'</code> to load
a SWAT+ project and <code>version = '2012'</code> to load a SWAT2012
version of the project. SWAT+ is under constant development and new
model revisions are released from time to time. I try to keep
<code>SWATdata</code> and the SWAT+ demo projects up to date and provide
at least a few of the last SWAT+ revisions as demo projects. If no
<code>revision</code> number is specified the most recent SWAT+ model is
loaded. You can, however, also load a SWAT+ project with that was built
for a specific SWAT+ revision by providing for example the input
argument <code>revision = 59.3</code> to load a SWAT+ revision 59.3
model setup. Please check the <a href="https://github.com/chrisschuerz/SWATdata#swatdata-" class="external-link"><code>SWATdata</code></a>
GitHub page to see which model setups are available. The two examples
below load the most recent SWAT+ model setup and the available SWAT2012
setup.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The path where the SWAT demo project will be written</span></span>
<span><span class="va">demo_path</span> <span class="op">&lt;-</span> <span class="st">'Define:/your/path'</span></span>
<span></span>
<span><span class="co"># Loading a SWAT+ demo project</span></span>
<span><span class="va">path_plus</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_demo.html">load_demo</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">'project'</span>,</span>
<span>                       path <span class="op">=</span> <span class="va">demo_path</span>,</span>
<span>                       version <span class="op">=</span> <span class="st">'plus'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Loading a SWAT2012 demo project</span></span>
<span><span class="va">path_2012</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_demo.html">load_demo</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">'project'</span>,</span>
<span>                       path <span class="op">=</span> <span class="va">demo_path</span>,</span>
<span>                       version <span class="op">=</span> <span class="st">'2012'</span><span class="op">)</span></span></code></pre></div>
<p>In the case of a SWAT project <code><a href="../reference/load_demo.html">load_demo()</a></code> saves the
defined SWAT project in the file path that was defined with
<code>path = demo_path</code> and returns the final demo project path as
a character string in <code>R</code>. I assigned these paths to the
variables <code>path_plus</code> and <code>path_2012</code> to use them
later in the model runs.</p>
</div>
<div class="section level3">
<h3 id="observation-data">Observation data<a class="anchor" aria-label="anchor" href="#observation-data"></a>
</h3>
<p><code>SWATdata</code> also provides daily discharge records for the
outlet of the demo catchment (Gauge J of LREW) for the time period
1968-01-01 until 2012-12-31. Observation data are useful for the model
evaluation. These date will be used in several examples with the SWAT
demo projects. You can load the observation data again using the
function <code><a href="../reference/load_demo.html">load_demo()</a></code>. To access the observation data set
you have to define <code>dataset = 'observation'</code>. The other input
arguments are not required in this case as the observation data are the
same for all demos. When loading the observation data set
<code><a href="../reference/load_demo.html">load_demo()</a></code> returns a data frame with a date column and a
column for the mean daily discharge at that date. In the code below the
observation data frame is assigned to the variable
<code>q_obs</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_obs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_demo.html">load_demo</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">'observation'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">q_obs</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 16,437 × 2</span></span></span>
<span><span class="co">#&gt;    date       discharge</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1968-01-01      0.16</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1968-01-02      0.57</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1968-01-03      0.61</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1968-01-04      0.37</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1968-01-05      0.25</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1968-01-06      0.2 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1968-01-07      0.21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1968-01-08      0.22</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1968-01-09      0.18</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1968-01-10      0.34</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 16,427 more rows</span></span></span></code></pre>
<p>A quick plot of the observation data <code>q_obs</code> shows the
daily mean discharge at Gauge J for the years 1968 to 2012 in <span class="math inline">\(m^3 s^{-1}\)</span>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">q_obs</span>, type <span class="op">=</span> <span class="st">'l'</span><span class="op">)</span></span></code></pre></div>
<p><img src="SWATrunR_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="first-swat-model-runs">First SWAT model runs<a class="anchor" aria-label="anchor" href="#first-swat-model-runs"></a>
</h2>
<p>With the functions <code><a href="../reference/run_swatplus.html">run_swatplus()</a></code> and
<code><a href="../reference/run_swat2012.html">run_swat2012()</a></code> you can perform simulations in a SWAT+ or a
SWAT2012 project folder that is located on the local hard drive. SWAT
model simulations write a large range of output variables after a
simulation run. Usually only a few variables are analyzed
(e.g. in-stream discharge or nutrient loads). With the function
<code><a href="../reference/define_output.html">define_output()</a></code> you can specify the output variables that
are returned to <code>R</code> after the simulation run. Thus, the
minimum information you have to provide to perform a model simulation is
where your project is located with the input argument
<code>project_path</code> and which simulation outputs should be
returned after the simulation defined with the input argument
<code>output</code>. The output variables are always specified with the
function <code><a href="../reference/define_output.html">define_output()</a></code> and passed through with the input
argument <code>output</code>. The example below shows a minimum example
for a SWAT+ project.</p>
<div class="section level3">
<h3 id="project_path">
<code>project_path</code><a class="anchor" aria-label="anchor" href="#project_path"></a>
</h3>
<p>As the project path we define the path to the previously loaded demo
project <code>project_path = path_plus</code>. If you do not want to
work with the demo project, but you already want to use your own SWAT
project you can define the path to your SWAT ‘TxtInOut’ folder and
simply run simulations there. Be aware in this case that the runtime can
be much longer for large projects, which might hinder you in testing
many things when first playing around with <code>SWATrunR</code>. The
demo projects are designed in a way that simulations should not take
longer than a few seconds, depending on the machine where it is
executed. If you want to use your own SWAT project please consider a few
things:</p>
<ul>
<li>The SWAT project folder must contain exactly one executable file.
<code>run_swat*()</code> automatically searches for the one SWAT
executable in the project folder. If there are no or more than one
executables available in the project folder an error is returned as
<code>run_swat*()</code> does not know which executable file to
use.</li>
<li>Weather data must be provided with the project as
<code>run_swat*()</code> does some checks for which time periods weather
data are available.</li>
<li>Make clear to use the right function, ether
<code><a href="../reference/run_swatplus.html">run_swatplus()</a></code> to run a SWAT+ project, or
<code><a href="../reference/run_swat2012.html">run_swat2012()</a></code> to run a SWAT2012 project.</li>
<li>again <strong><em>Please try to avoid blanks in your path
names</em></strong> (e.g. ‘C:/this is a/path with blanks’).
<strong><em>This can cause issues when running the model. Try to use
e.g.</em></strong> ’_’ <strong><em>in your path names
instead.</em></strong>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="output-and-define_output">
<code>output</code> and <code>define_output()</code><a class="anchor" aria-label="anchor" href="#output-and-define_output"></a>
</h3>
<p>The simple example below defines only one output that is returned to
<code>R</code>. The definition follows a simple syntax.
<code><a href="../reference/define_output.html">define_output()</a></code> requires three input arguments. The
<code>file</code> indicates in which file the SWAT output variable of
interest is written. As we want to return the discharge in this example
we define <code>file = 'channel_sd'</code>. All output files for SWAT+
are listed in the <em>‘print.prt’</em> of your SWAT+ project. The
variable for the discharge that leaves a channel is called
<code>'flo_out'</code>. We define <code>variable = 'flo_out'</code>. The
third input argument is <code>unit</code>. <code>unit</code> defines for
which units, in this case for which channels, we want to extract the
output <code>variable</code>. The SWAT+ demo project has only one
channel and therefore we define <code>unit = 1</code>. The correct
channel ID is listed in the <em>‘chandeg.con’</em> file in the SWAT+
project folder. If you have, many channels and you want to compare your
simulation outputs with observation data, make sure to select the
correct <code>id</code> that corresponds to your gauge location.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_sim_plus</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_swatplus.html">run_swatplus</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="va">path_plus</span>,</span>
<span>                           output <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">'channel_sd_day'</span>,</span>
<span>                                                  variable <span class="op">=</span> <span class="st">'flo_out'</span>,</span>
<span>                                                  unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt; Building 1 thread in 'Define:/your/path/swatplus_demo/.model_run':</span></span>
<span><span class="co">#&gt;  Thread 1 of 1   Time elapsed: 0S   Time remaining: 0S    </span></span>
<span><span class="co">#&gt;  Completed 1 thread in 0S</span></span>
<span><span class="co">#&gt; Performing 1 simulation on 1 core:</span></span>
<span><span class="co">#&gt;  Simulation 1 of 1   Time elapsed: 3S   Time remaining: 0S</span></span>
<span><span class="co">#&gt;  Completed 1 simulation in 3S</span></span></code></pre></div>
<p>The syntax of <code><a href="../reference/define_output.html">define_output()</a></code> that was shown above for
SWAT+ is the same for SWAT2012 projects. The only difference between the
two models in the output definition is how to correctly address the
output variables. The output files are organized differently in SWAT+
and SWAT2012. SWAT2012 simulations generate output files that are called
<em>‘output.’</em> followed by a suffix that defines the type of output.
Subbasin outputs are stored in the <em>‘.sub’</em> file, HRU outputs in
the <em>‘.hru’</em> file, and channel outputs for example in the
’<em>.rch’</em> file. This list is not comprehensive and there are
further output files. If you want to return variables from other
SWAT2012 output files please please go through the <em>‘output.’</em>
files in your project folder after performing a simulation run. In the
minimum example we define <code>file = 'rch'</code> to access the
channel output file. The variable <em>‘FLOW_OUT’</em> defines the
discharge that leaves a channel. Therefore, we define
<code>variable = 'FLOW_OUT'</code>. <strong><em>Caution:</em></strong>
<em>Be aware that the variable definition is case sensitive and
variables in SWAT2012 are usually upper case.</em> The SWAT2012 demo
project has in total 3 channels. In the output definition we can also
define multiple units for which we want to extract outputs. In the
example below we define <code>unit = 1:3</code> which means that we
return the <em>‘FLOW_OUT’</em> for the channel units 1,2, and 3.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_sim_2012</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_swat2012.html">run_swat2012</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="va">path_2012</span>,</span>
<span>                           output <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">'rch'</span>,</span>
<span>                                                  variable <span class="op">=</span> <span class="st">'FLOW_OUT'</span>,</span>
<span>                                                  unit <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt; Building 1 thread in 'Define:/your/path/swat2012_demo/.model_run':</span></span>
<span><span class="co">#&gt;  Thread 1 of 1   Time elapsed: 3S   Time remaining: 0S    </span></span>
<span><span class="co">#&gt;  Completed 1 thread in 3S</span></span>
<span><span class="co">#&gt; Performing 1 simulation on 1 core:</span></span>
<span><span class="co">#&gt;  Simulation 1 of 1   Time elapsed: 4S   Time remaining: 0S</span></span>
<span><span class="co">#&gt;  Completed 1 simulation in 4S</span></span></code></pre></div>
<p>All caps variable names can be annoying when you frequently call them
in your analyses in <code>R</code>. You can also assign a different name
to the ouput variables. The only difference is that you have to provide
the defined outputs in a <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>. The output definition in a
<code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> is required in any case when you want to define
several output variables, which is further explained in the article on
output definition. The small example below performs exactly the same
SWAT2012 simulations as above but assigns the names <code>q_1</code>,
<code>q_2</code>, and <code>q_3</code> to the output variables.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_sim_2012_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_swat2012.html">run_swat2012</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="va">path_2012</span>,</span>
<span>                             output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>q <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">'rch'</span>,</span>
<span>                                                             variable <span class="op">=</span> <span class="st">'FLOW_OUT'</span>,</span>
<span>                                                             unit <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span> </span>
<span><span class="co">#&gt; Building 1 thread in 'Define:/your/path/swat2012_demo/.model_run':</span></span>
<span><span class="co">#&gt;  Thread 1 of 1   Time elapsed: 3S   Time remaining: 0S    </span></span>
<span><span class="co">#&gt;  Completed 1 thread in 3S</span></span>
<span><span class="co">#&gt; Performing 1 simulation on 1 core:</span></span>
<span><span class="co">#&gt;  Simulation 1 of 1   Time elapsed: 4S   Time remaining: 0S</span></span>
<span><span class="co">#&gt;  Completed 1 simulation in 4S</span></span></code></pre></div>
<p>The two examples for our first SWAT simulations use very basic output
definitions. The <code>output</code> definition in
<code>run_swat*()</code> can be more complex and more comprehensive. A
more detailed insight with further examples is provided in an article
that focuses on simulation output definition. I recommend to go the
examples in this article as well, as your model simulations should very
likely return more than just the discharge at your catchment outlet
<em>(The article is currently in preparation and will be online soon.
Please be patient in the meantime)</em>.</p>
</div>
<div class="section level3">
<h3 id="exploring-the-simulation-outputs">Exploring the simulation outputs<a class="anchor" aria-label="anchor" href="#exploring-the-simulation-outputs"></a>
</h3>
<p><code>SWATrunR</code> aims to return SWAT simulations in a
<em>tidy</em> format. The date structure of the simulation results is
different for single simulation and many simulations with different
parameter sets. Yet, the general structure is the same for all
simulation outputs returned in <code>R</code>. Simulation results are
always arranged in <code>tibbles</code> <span class="citation">(<a href="#ref-Mueller2019">Müller and Wickham, 2019</a>)</span>. In the
<code>run_swat*()</code> default setting (<code>add_date = TRUE</code>)
the first column of the simulation results is always the date column
followed by the columns for the output variables. If a single simulation
run was performed without parameter changes
(<code>parameter = NULL</code> so the default setting) a single tibble
with the simulation outputs for that run is returned. When performing
simulations with one or many different parameter sets a list of tibbles
is returned that I explain <a href="https://chrisschuerz.github.io/SWATrunR/articles/SWATrunR.html#exploring-simulations-with-parameter-changes">below</a>.</p>
<p>If we have a look at the outputs of all three simulations we see that
they all have the same general structure. The first column is a date
column which is followed by the defined output variables. In the case of
the SWAT+ simulation outputs <code>q_sim_plus</code> the single output
variable that we defined is called <code>flo_out</code>, so the name of
the variable as it is defined in the <em>.txt</em> output file.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_sim_plus</span></span>
<span><span class="co">#&gt; $simulation</span></span>
<span><span class="co">#&gt; $simulation$flo_out</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,653 × 2</span></span></span>
<span><span class="co">#&gt;    date        run_1</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01 0.092<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02 0.090<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03 0.091<span style="text-decoration: underline;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04 0.090<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05 0.091<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06 0.091<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07 0.092<span style="text-decoration: underline;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08 0.092<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09 0.092<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10 0.092<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 3,643 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info</span></span>
<span><span class="co">#&gt; $run_info$simulation_log</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">#&gt;   run_started         run_finished        run_time project_path          run_p…¹</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;Period&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2023-07-19 <span style="color: #949494;">10:56:22</span> 2023-07-19 <span style="color: #949494;">10:56:28</span> 6S       C:/Users/schuerz/Doc… C:/Use…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable name ¹​run_path</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info$simulation_period</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   start_date end_date   years_skip start_date_print</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2000-01-01 2012-12-31          3               <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info$output_definition</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 6</span></span></span>
<span><span class="co">#&gt;   name    file_full          file       time_interval variable unit </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> flo_out channel_sd_day.txt channel_sd day           flo_out  1</span></span></code></pre></div>
<p>For the SWAT2012 model setup we defined to return the discharges of
all three channels in the model setup. In the simulation outputs we can
see now that a suffix number was added to the variable names. These
numbers correspond to the unit IDs in the output table. Thus, you can
directly relate the outputs in <code>R</code> to the respective units in
a model setup.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_sim_2012</span></span>
<span><span class="co">#&gt; $simulation</span></span>
<span><span class="co">#&gt; $simulation$FLOW_OUT_1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,653 × 2</span></span></span>
<span><span class="co">#&gt;    date       run_1</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01 0.174</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02 0.154</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03 0.150</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04 0.148</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05 0.146</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06 0.145</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07 0.144</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08 0.144</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09 0.143</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10 0.143</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 3,643 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $simulation$FLOW_OUT_2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,653 × 2</span></span></span>
<span><span class="co">#&gt;    date        run_1</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01 0.103 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02 0.095<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03 0.093<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04 0.092<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05 0.091<span style="text-decoration: underline;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06 0.090<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07 0.090<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08 0.089<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09 0.089<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10 0.089<span style="text-decoration: underline;">0</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 3,643 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $simulation$FLOW_OUT_3</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,653 × 2</span></span></span>
<span><span class="co">#&gt;    date       run_1</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01 0.413</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02 0.377</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03 0.369</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04 0.363</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05 0.359</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06 0.357</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07 0.355</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08 0.354</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09 0.353</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10 0.352</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 3,643 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info</span></span>
<span><span class="co">#&gt; $run_info$simulation_log</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">#&gt;   run_started         run_finished        run_time project_path          run_p…¹</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;Period&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2023-07-19 <span style="color: #949494;">10:56:16</span> 2023-07-19 <span style="color: #949494;">10:56:21</span> 6S       C:/Users/schuerz/Doc… C:/Use…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable name ¹​run_path</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info$simulation_period</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   start_date end_date   years_skip output_interval</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2000-01-01 2012-12-31          3 d              </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info$output_definition</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   name     file       variable unit </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FLOW_OUT output.rch FLOW_OUT 1:3</span></span></code></pre></div>
<p>As mentioned above, the only difference between
<code>q_sim_2012</code> and <code>q_sim_2012_2</code> is the naming of
the output variables. We defined that the should now be called
<code>q</code> instead of <code>FLOW_OUT</code>. Although the name has
changed the suffix values are the same in this case and is added
automatically by <code><a href="../reference/define_output.html">define_output()</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_sim_2012_2</span></span>
<span><span class="co">#&gt; $simulation</span></span>
<span><span class="co">#&gt; $simulation$q_1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,653 × 2</span></span></span>
<span><span class="co">#&gt;    date       run_1</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01 0.174</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02 0.154</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03 0.150</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04 0.148</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05 0.146</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06 0.145</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07 0.144</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08 0.144</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09 0.143</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10 0.143</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 3,643 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $simulation$q_2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,653 × 2</span></span></span>
<span><span class="co">#&gt;    date        run_1</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01 0.103 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02 0.095<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03 0.093<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04 0.092<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05 0.091<span style="text-decoration: underline;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06 0.090<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07 0.090<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08 0.089<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09 0.089<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10 0.089<span style="text-decoration: underline;">0</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 3,643 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $simulation$q_3</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,653 × 2</span></span></span>
<span><span class="co">#&gt;    date       run_1</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01 0.413</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02 0.377</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03 0.369</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04 0.363</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05 0.359</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06 0.357</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07 0.355</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08 0.354</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09 0.353</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10 0.352</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 3,643 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info</span></span>
<span><span class="co">#&gt; $run_info$simulation_log</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">#&gt;   run_started         run_finished        run_time project_path          run_p…¹</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;Period&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2023-07-19 <span style="color: #949494;">10:55:58</span> 2023-07-19 <span style="color: #949494;">10:56:04</span> 6S       C:/Users/schuerz/Doc… C:/Use…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable name ¹​run_path</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info$simulation_period</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   start_date end_date   years_skip output_interval</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2000-01-01 2012-12-31          3 d              </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info$output_definition</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   name  file       variable unit </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> q     output.rch FLOW_OUT 1:3</span></span></code></pre></div>
<p>You can see from all three simulation outputs that daily simulation
outputs were returned and the output printing in all cases started with
the date 2003-01-01. The simple reason for that is that the default
settings in the <em>‘file.cio’</em> of the SWAT2012 model setup and the
<em>‘print.prt’</em> and <em>‘time.sim’</em> files of the SWAT+ model
setup are defined to perform simulations between 2000-01-01 and
2012-12-31 and to skip 3 years and return daily outputs. In practice we
often want to change all of these model parameters.
<code><a href="../reference/run_swatplus.html">run_swatplus()</a></code> and <code><a href="../reference/run_swat2012.html">run_swat2012()</a></code> do have many
input arguments to specify these and other model configurations. I will
explain further input arguments in the section <a href="https://chrisschuerz.github.io/SWATrunR/articles/SWATrunR.html#further-SWATrunR-input-arguments">Further
input arguments</a>.</p>
</div>
<div class="section level3">
<h3 id="plotting-the-simulation-outputs">Plotting the simulation outputs<a class="anchor" aria-label="anchor" href="#plotting-the-simulation-outputs"></a>
</h3>
<p>The clear data structure of SWAT simulations that are returned with
<code>run_swat*()</code> facilitate their integration into any analyses,
without requiring any additional major data preparation. The small
example below shows how we can use the simulation outputs to plot the
SWAT+ simulations and the SWAT2012 simulations together with the
observed discharge.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Loading R package for data analysis (dplyr and tidyr) and plotting (ggplot2)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Prepare the SWAT+ simulation output</span></span>
<span><span class="va">q_plus</span> <span class="op">&lt;-</span> <span class="va">q_sim_plus</span><span class="op">$</span><span class="va">simulation</span><span class="op">$</span><span class="va">flo_out</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>q_plus <span class="op">=</span> <span class="va">run_1</span><span class="op">)</span> <span class="co"># Rename the output to q_plus</span></span>
<span></span>
<span><span class="co"># Prepare the SWAT2012 simulation output</span></span>
<span><span class="va">q_2012</span> <span class="op">&lt;-</span> <span class="va">q_sim_2012</span><span class="op">$</span><span class="va">simulation</span><span class="op">$</span><span class="va">FLOW_OUT_3</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>q_2012 <span class="op">=</span> <span class="va">run_1</span><span class="op">)</span>  <span class="co"># Rename the output to q_plus</span></span>
<span></span>
<span><span class="co"># Prepare the table for plotting</span></span>
<span><span class="va">q_plot</span> <span class="op">&lt;-</span> <span class="va">q_obs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>q_obs <span class="op">=</span> <span class="va">discharge</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># Rename the discharge columnt to q_obs</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fl">2003</span><span class="op">:</span><span class="fl">2012</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># Filter for years between 2003 and 2012</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">q_plus</span>, by <span class="op">=</span> <span class="st">'date'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># Join with the q_plus table by date</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">q_2012</span>, by <span class="op">=</span> <span class="st">'date'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># Join with the q_plus table by date</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="va">.</span>, cols <span class="op">=</span> <span class="op">-</span><span class="va">date</span>, names_to <span class="op">=</span> <span class="st">'variable'</span>, values_to <span class="op">=</span> <span class="st">'discharge'</span><span class="op">)</span> <span class="co"># Make a long table for plotting</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">q_plot</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">discharge</span>, col <span class="op">=</span> <span class="va">variable</span>, lty <span class="op">=</span> <span class="va">variable</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'tomato3'</span>, <span class="st">'black'</span>, <span class="st">'steelblue3'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_linetype_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'dotted'</span>, <span class="st">'solid'</span>, <span class="st">'dashed'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="SWATrunR_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="changing-parameter-values">Changing parameter values<a class="anchor" aria-label="anchor" href="#changing-parameter-values"></a>
</h2>
<p>Changing parameter values is an essential option for SWAT model
simulations. In a SWAT model calibration we (or at least I do) define
large sets of combinations for model parameter changes and apply each of
them in model simulations. Parameter optimization usually starts with an
initial parameter combination and iteratively tests new parameter
combinations to progessively improve the model performance.
<code>SWATrunR</code>’s <code>run_swat*()</code> functions can easily be
included in such modelling workflows in <code>R</code>. Parameter value
changes in a SWAT run are controlled through the input argument
<code>parameter</code>.</p>
<div class="section level3">
<h3 id="parameter-inputs">
<code>parameter</code> inputs<a class="anchor" aria-label="anchor" href="#parameter-inputs"></a>
</h3>
<p>The input argument <code>parameter</code> is available in
<code>run_swatplus</code> and <code>run_swat2012</code>. The definition
of parameter changes works in a very similar way for SWAT+ and SWAT2012
models. The definition of a parameter value change essentially consists
of a parameter name text string and a value that defines the magnitude
of the change. The name definition for a parameter value change follows
a very specific syntax. The individual parts of that text string control
different aspects of a parameter change. The overview figure below shows
the individual parts of a parameter name.</p>
<p><img src="figures/parchg_naming.svg" title="Parts of parameter names" alt="Parts of parameter names" width="80%" style="display: block; margin: auto;"></p>
<p>The minimum required inputs to define a parameter change are the SWAT
model parameter, the type of change that should be applied to the
parameter and the value of the change. The example below would cause a
change of all Curve Number 2 <em>‘cn2’</em> values in a SWAT+ model
setup by a value of 5.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">par_chg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cn2.hru|change = abschg"</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>As the syntax is outlined in the figure above, the model parameter
information must provide the exact name of the parameter in the model
together with the file suffix (or in case of SWAT+ the unit) where this
parameter is implemented. The parameter name and the suffix are
separated by a <code>'.'</code>. <em>‘cn2’</em> is an HRU parameter in a
SWAT+ setup. Therefore the suffix is <code>'.hru'</code>. All
expressions that follow the parameter are separated by a pipe dash
<code>'|'</code>. As a second expression the type of change must follow.
The type definition is always written as
<code>'change = change_type'</code>. Four types of parameter changes can
be applied. <code>'absval'</code> replaces the initial value by the
newly defined value. <code>'abschg'</code> adds an absolute value to the
initial parameter value. <code>'relchg'</code> and <code>'pctchg'</code>
change a parameter by a fraction or a percentage of the initial
parameter value.</p>
<p>Similar to the ouput definition the goal for the parameter definition
was to keep the syntax for SWAT+ and SWAT2012 the same. Yet again
differences are present due to , e.g. different parameter names in the
model and parameter suffixes. The parameter change from the example
above would look as follows for a SWAT2012 model setup. We see that the
parameter name is written all caps, as the Curve Number 2 is defined
this way in the SWAT2012 input files. Also the parameter is not defined
in the <em>‘.hru’</em> input files, but is part of the <em>‘.mgt’</em>
input files.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">par_chg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CN2.mgt|change = abschg"</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>The parameters, their associated object types and value ranges of
SWAT+ model setups are listed in the <em>‘cal_parms.cal’</em> that
should be available in every SWAT+ <em>‘TxtInOut’</em> folder.
<strong><em>Caution:</em></strong> <em>There is no guarantee that
changes for all of the parameters that are listed in this file are
effective. I always recommend to test parameter changes in small
examples.</em> To identify SWAT2012 parameters and their associated
input files I recommend to look into your SWAT2012 peoject and check
where the parameters can be found.</p>
<p>You can define individual names for a parameter. This is in most
cases optional. The name must be unique and cannot be used for other
parameters. If no name is assigned the SWAT parameter name is used
instead. Thus, a common situation when you have to define a parameter
name, is when you define a change of the same parameter e.g. for
different subbasins, soils, slope classes, etc. (which are defined by
parameter conditions which are explained below and with more detail in
an upcoming article on parameter definition). If a parameter name is
assigned the parameter name has to be in the first position and is
separated by <code>'::'</code> from the following expressions. The
example below shows a case where the SWAT2012 model parameter
<em>‘CANMX’</em> is used twice but changed to different values for
different land uses.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">par_chg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"canmax_forest::CANMX.hru | change = absval | luse %in% c('FRST', 'FRSD', 'FRSE')"</span> <span class="op">=</span> <span class="fl">4</span>,</span>
<span>             <span class="st">"canmax_other::CANMX.hru | change = absval | !(luse %in% c('FRST', 'FRSD', 'FRSE'))"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>In the example the initial values of the SWAT2012 parameter
<em>‘CANMX’</em> are replaced by different values for forest land uses
and all other land uses. Therefore, individual names are required that
you have to assign. Otherwise, <code>run_swat*()</code> tries to assign
the same name to effectively two different parameter changes and would
trigger an error.</p>
<p>The last expression that you can see in both parameter definitions in
the example above are called conditions. With conditions you can
constrain a parameter change to specific units of your model setup and
thus the parameter change does not affect the entire model setup. The
conditions must be written as <code>R</code> code syntax. The first
condition above <code>'luse %in% c('FRST', 'FRSD', 'FRSE')'</code> means
that the parameter <em>‘CANMX’</em> receives a value of 4 in every HRU
where the land use is a forest land use. The second expression
<code>'!(luse %in% c('FRST', 'FRSD', 'FRSE'))'</code> means the
opposite, so all land uses that are no forest land use.</p>
<p>The syntax for conditions is again similar for SWAT+ and SWAT2012
model setups. Yet, major differences exist in the variables that can be
used to apply a condition. The biggest difference is present for the
definition of spatial units. While SWAT2012 model setups have a very
clear overall model structure, SWAT+ setups can be very flexible in
their spatial configuration. Due to the clear structure of SWAT2012
models the spatial conditions <code>'sub'</code> or <code>'hru'</code>
can be applied to all parameters. For SWAT+ conditions only the spatial
variable <code>'unit'</code> exists which can be used to constrain a
change to unit IDs of objects to which a parameter is associated to.</p>
<p>The example below defines parameter value changes for a SWAT2012
model setup. The parameter <em>‘ALPHA_BF’</em> is changed by three
different values depending on the Subbasin ID. Again in this case the
definition of unique parameter names is mandatory. The parameter
<em>‘USLE_P’</em> is only changed in three specific HRUs. It is not
required to assign a parameter name here, but it is overall good
practice to give the parameter changes good, self explanatory names that
help in any further analysis.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">par_cond2012</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a_bf_head::ALPHA_BF.gw | change = abschg | sub &lt; 4"</span> <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>                  <span class="st">"a_bf_upland::ALPHA_BF.gw | change = abschg | sub %in% c(5,7,11)"</span> <span class="op">=</span> <span class="fl">0.35</span>,</span>
<span>                  <span class="st">"a_bf_floodpl::ALPHA_BF.gw | change = abschg | sub %in% c(6,8:10)"</span> <span class="op">=</span> <span class="fl">0.6</span>,</span>
<span>                  <span class="st">"p_terrace::USLE_P.mgt | change = absval | hru %in% c(37, 45, 154)"</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></code></pre></div>
<p>The example below shows unit conditions for SWAT+ model parameters.
While the changes for <em>‘cn2’</em> affect specific HRUs that were
defined with the <code>'unit'</code> condition, the unit condition in
the second case addresses the aquifers with the IDs 1 and 5 as the
parameter <em>‘alpha’</em> is an aquifer parameter.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">par_condplus</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cn2_agri::cn2.hru | change = relchg | unit = c(1:12, 25:27, 46:72)"</span> <span class="op">=</span> <span class="op">-</span> <span class="fl">0.05</span>,</span>
<span>                  <span class="st">"alpha::alpha.aqu | change = absval | unit %in% c(1,5)"</span> <span class="op">=</span> <span class="fl">0.35</span><span class="op">)</span></span></code></pre></div>
<p>There are many possibilities to define conditions for parameter
changes and multiple variables exist that can be used in conditions.
These will be further addressed in an article on parameter changes that
also provides overview tables for condition variables and gives further
examples for parameter definitions. <em>(This article is currently in
preparation)</em>.</p>
</div>
<div class="section level3">
<h3 id="simulation-with-one-parameter-combination">Simulation with one parameter combination<a class="anchor" aria-label="anchor" href="#simulation-with-one-parameter-combination"></a>
</h3>
<p>You can define one combination of parameter changes with a named
vector. Each parameter combination is defined as described in the
examples above, which is a parameter name following the specific syntax
and the value of the change. The parameter changes are concatinated with
the concatinate <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> function to form the parameter
combination. To define single parameter set a named vector is generated.
The names define the parameters the type of change. Below we generate a
combination of parameter changes for 9 SWAT+ model parameters that are
frequently used in model calibration.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">par_comb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cn2.hru | change = abschg | plant == 'corn'"</span> <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>,</span>
<span>              <span class="st">'lat_ttime.hru | change = absval'</span> <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>              <span class="st">'lat_len.hru | change = abschg'</span> <span class="op">=</span> <span class="fl">30</span>,</span>
<span>              <span class="st">'epco.hru | change = absval'</span> <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>              <span class="st">'esco.hru | change = absval'</span> <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>              <span class="st">'perco.hru | change = absval'</span> <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>              <span class="st">"k.sol | change = pctchg | hsg == 'C'"</span> <span class="op">=</span> <span class="fl">25</span>,</span>
<span>              <span class="st">'awc.sol | change = pctchg'</span> <span class="op">=</span> <span class="op">-</span><span class="fl">10</span>,</span>
<span>              <span class="st">'alpha.aqu | change = absval'</span> <span class="op">=</span> <span class="fl">0.35</span><span class="op">)</span></span></code></pre></div>
<p>The generated parameter combination can be included in the SWAT+
model execution by passing the parameter set to the input argument
<code>parameter</code> in the <code><a href="../reference/run_swatplus.html">run_swatplus()</a></code> function call.
So you see that the only difference between a simulation where no
parameter changes are applied and the simulation run below is the input
argument <code>parameter</code>, that is not <code>NULL</code> but uses
the defined vector <code>par_comb</code> to define the parameter
changes.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_sim1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_swatplus.html">run_swatplus</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="va">path_plus</span>,</span>
<span>                       output <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"channel_sd_day"</span>,</span>
<span>                                              variable <span class="op">=</span> <span class="st">"flo_out"</span>,</span>
<span>                                              unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                       parameter <span class="op">=</span> <span class="va">par_comb</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt; Building 1 thread in 'Define:/your/path/swatplus_demo/.model_run':</span></span>
<span><span class="co">#&gt;  Thread 1 of 1   Time elapsed: 1S   Time remaining: 0S    </span></span>
<span><span class="co">#&gt;  Completed 1 thread in 1S</span></span>
<span><span class="co">#&gt; Performing 1 simulation on 1 core:</span></span>
<span><span class="co">#&gt;  Simulation 1 of 1   Time elapsed: 2S   Time remaining: 0S</span></span>
<span><span class="co">#&gt;  Completed 1 simulation in 2S</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="exploring-results-with-one-parameter-combination">Exploring results with one parameter combination<a class="anchor" aria-label="anchor" href="#exploring-results-with-one-parameter-combination"></a>
</h3>
<p>To recap, the simulation where no parameter changes were applied
returned a single <code>tibble</code> with the simulation outputs for
the defined output variables. The output <code>q_sim1</code> in this
example is a bit more complex and consists of a <code>list</code> of
<code>tibbles</code> as we have to store more information in the case of
changed parameter values. The output consists of two main parts.</p>
<p>The first element is <code>parameter</code> which is again a list
that hast two <code>tibble</code> elements. The first one is
<code>parameter$values</code> that stores all parameter combinations in
a <code>tibble</code>, in this case with nine columns for all the
parameters and one row, as we only defined one parameter combination.
The names of the parameter are in this case the SWAT+ model parameter
names as we did not define individual names. If individual parameter
names were defined the column names would be the individual names.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_sim1</span><span class="op">$</span><span class="va">parameter</span><span class="op">$</span><span class="va">values</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 9</span></span></span>
<span><span class="co">#&gt;     cn2 lat_ttime lat_len  epco  esco perco     k   awc alpha</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>    -<span style="color: #BB0000;">5</span>       0.5      30   0.8   0.5   0.4    25   -<span style="color: #BB0000;">10</span>  0.35</span></span></code></pre></div>
<p>The second element is <code>parameter$definition</code>. This is a
tibble that provides the information how we defined each parameter
change. The value of a parameter change alone is useless information as
it does not say anything about the type of change or any parameter
conditions that were applied. The definition table again shows the
<code>par_name</code> which is the user defined name in case a name was
assigned. In this example <code>par_name</code> is the same as
<code>parameter</code> which is the SWAT parameter name. The column
<code>file_name</code> indicates the file or unit level where the
parameter is implemented and is the suffix of <code>parameter</code>
that we defined for <code>par_comb</code>. <code>change</code> showes
the type of change that was applied to a parameter. If parameter
conditions were implemented in the parameter set additional columns are
visible in the table that give information of the applied rules. In this
example changes for <em>‘cn2’</em> were only employed when corn is
currently planted in an HRU and the hydraulic conductivity <em>‘k’</em>
was increased for soils of the hydrological soil group ‘C’. The last
column <code>full_name</code> gives the full parameter combination as it
was defined above.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_sim1</span><span class="op">$</span><span class="va">parameter</span><span class="op">$</span><span class="va">definition</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 7</span></span></span>
<span><span class="co">#&gt;   par_name  parameter file_name change plant    hsg   full_name                 </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> cn2       cn2       hru       abschg =='corn' <span style="color: #BB0000;">NA</span>    cn2.hru | change = abschg…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> lat_ttime lat_ttime hru       absval <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>    lat_ttime.hru | change = …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> lat_len   lat_len   hru       abschg <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>    lat_len.hru | change = ab…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> epco      epco      hru       absval <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>    epco.hru | change = absval</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> esco      esco      hru       absval <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>    esco.hru | change = absval</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> perco     perco     hru       absval <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>    perco.hru | change = absv…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> k         k         sol       pctchg <span style="color: #BB0000;">NA</span>       =='C' k.sol | change = pctchg |…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> awc       awc       sol       pctchg <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>    awc.sol | change = pctchg </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> alpha     alpha     aqu       absval <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>    alpha.aqu | change = absv…</span></span></code></pre></div>
<p>The second part of the simulation outputs provides the
<code>simulation</code> results for the defined output variables in a
<code>tibble</code>. The structure of this table is the same as the one
of the outputs where no parameter changes were implemented. If the
parameter changes should have an effect on the simulation of
<code>flo_out</code>, the simulated values simulated values stored in
<code>simulation</code> should of course be different.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_sim1</span><span class="op">$</span><span class="va">simulation</span><span class="op">$</span><span class="va">flo_out</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,653 × 2</span></span></span>
<span><span class="co">#&gt;    date        run_1</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01 0.064<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02 0.036<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03 0.022 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04 0.017<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05 0.015<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06 0.013<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07 0.014<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08 0.013<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09 0.012<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10 0.012<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 3,643 more rows</span></span></span></code></pre></div>
<p>To see if the parameter change was effective we compare the simulated
outputs of <code>q_sim1</code> where we implemented the parameter set
<code>par_comb</code> to the initial simulation <code>q_sim_plus</code>
from our <a href="https://chrisschuerz.github.io/SWATrunR/articles/SWATrunR.html#first-swat-model-runs">first
SWAT model runs</a> in a simple plot.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Adding a column that indicates the par change to q_sim1</span></span>
<span><span class="va">q_sim1_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">q_sim1</span><span class="op">$</span><span class="va">simulation</span><span class="op">$</span><span class="va">flo_out</span>, par_change <span class="op">=</span> <span class="st">'yes'</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Preparing the plot table</span></span>
<span><span class="va">q_plot</span> <span class="op">&lt;-</span> <span class="va">q_sim_plus</span><span class="op">$</span><span class="va">simulation</span><span class="op">$</span><span class="va">flo_out</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">.</span>, par_change <span class="op">=</span> <span class="st">'no'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># Also add par change column to q_sim_plus</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">q_sim1_sim</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>discharge <span class="op">=</span> <span class="va">run_1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">q_plot</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">discharge</span>, col <span class="op">=</span> <span class="va">par_change</span>, linetype <span class="op">=</span> <span class="va">par_change</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'tomato3'</span>, <span class="st">'steelblue3'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_linetype_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'solid'</span>, <span class="st">'dashed'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="SWATrunR_files/figure-html/unnamed-chunk-28-1.png" width="700"></p>
<p>The plot shows differences between the two simulations, particularly
for the recession and base flow of the discharge. Without discussing the
results in any way, we can see that the parameter changes were effective
in our small example. I would strongly recommend to perform such a
procedure with short simulation runs and every parameter that should be
included in e.g. a calibration individually to verify that intended
parameter changes actually work. It is better to invest some time in a
few quick simulation experiments, than having to realize that changing
parameter values did not work after running thousands of simulations for
a few days.</p>
</div>
<div class="section level3">
<h3 id="simulations-with-a-parameter-set">Simulations with a parameter set<a class="anchor" aria-label="anchor" href="#simulations-with-a-parameter-set"></a>
</h3>
<p>Similar to the single parameter combination in the previous example
we can also define entire parameter sets that we implement in the
simulation runs. The only difference is that we cannot define a set of
parameter combinations with a single vector with the <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>
function. Instead we define a <code>tibble</code> with our parameter
combinations. In this tibble each column defines a parameter change
(again through the syntax of its name). Each row is one combination of
the parameter changes that will be used in a simulation. The example
below uses a similar combination of parameter changes as in the previous
example. This time we uniformly sample each parameter change
<code>n = 5</code> times with <code><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif()</a></code> and combine all
samples to a table with 9 columns and 5 rows.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span></span>
<span><span class="va">par_set</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="st">'cn2.hru | change = abschg'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="op">-</span><span class="fl">15</span>,<span class="fl">10</span><span class="op">)</span>,</span>
<span>                  <span class="st">'lat_ttime.hru | change = absval'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="fl">0.5</span>,<span class="fl">5</span><span class="op">)</span>,</span>
<span>                  <span class="st">'lat_len.hru | change = abschg'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="op">-</span><span class="fl">10</span>,<span class="fl">50</span><span class="op">)</span>,</span>
<span>                  <span class="st">'epco.hru | change = absval'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="fl">0.1</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>                  <span class="st">'esco.hru | change = absval'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="fl">0.1</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>                  <span class="st">'perco.hru | change = absval'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="fl">0.1</span>,<span class="fl">0.8</span><span class="op">)</span>,</span>
<span>                  <span class="st">'k.sol | change = pctchg'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="op">-</span><span class="fl">20</span>,<span class="fl">100</span><span class="op">)</span>,</span>
<span>                  <span class="st">'awc.sol | change = pctchg'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="op">-</span><span class="fl">20</span>,<span class="fl">20</span><span class="op">)</span>,</span>
<span>                  <span class="st">'alpha.aqu | change = absval'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="fl">0.1</span>,<span class="fl">0.8</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">par_set</span></span></code></pre></div>
<p>The implementation in <code>run_swat*()</code> works the same way as
with a single parameter set. The parameter table <code>par_set</code> is
simply passed to the input argument <code>parameter</code>. To show the
main differences in the simulation outputs we define the three SWAT
output variables <em>‘flo_out’</em>, <em>‘surq_gen’</em>, and
<em>‘latq’</em> to be returned in <code>R</code>. The progress message
this time shows that 5 simulations are performed and updates the elapsed
and remaining time for the simulations, which can be valuable
information in case of longer simulation experiments. It further says
that the simulations are performed on one core. Parallel processing is
implemented in <code>SWATrunR</code> and can be easily activated with
the input argument <code>n_thread</code>. Parallel processing will be
briefly addressed in the section ??? below.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_simn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_swatplus.html">run_swatplus</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="va">path_plus</span>,</span>
<span>                       output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>q_cha <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">'channel_sd_day'</span>,</span>
<span>                                                           variable <span class="op">=</span> <span class="st">'flo_out'</span>,</span>
<span>                                                           unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                                     q_sur <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"basin_wb_day"</span>,</span>
<span>                                                           variable <span class="op">=</span> <span class="st">"surq_gen"</span>,</span>
<span>                                                           unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                                     q_lat <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"basin_wb_day"</span>,</span>
<span>                                                           variable <span class="op">=</span> <span class="st">"latq"</span>,</span>
<span>                                                           unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                       parameter <span class="op">=</span> <span class="va">par_set</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt; Building 1 thread in 'Define:/your/path/swatplus_demo/.model_run':</span></span>
<span><span class="co">#&gt;  Thread 1 of 1   Time elapsed: 0S   Time remaining: 1S    </span></span>
<span><span class="co">#&gt;  Completed 1 thread in 1S</span></span>
<span><span class="co">#&gt; Performing 5 simulations on 1 cores:</span></span>
<span><span class="co">#&gt;  Simulation 4 of 5   Time elapsed: 16S   Time remaining: 4S</span></span>
<span><span class="co">#&gt;  Completed 5 simulations in 20S</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">q_simn</span>, <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">'vignettes/datasets/q_simn.rds'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="exploring-results-with-a-parameter-set">Exploring results with a parameter set<a class="anchor" aria-label="anchor" href="#exploring-results-with-a-parameter-set"></a>
</h3>
<p>The general structure of the simulation output that results from a
parameter set is a again a <code>list</code> with the two main elements
<code>parameter</code> and <code>simulation</code>. If we have a look at
<code>q_simn$parameter</code> we can see that the structure is the same
as in the previous example. Differences are that the
<code>parameter$values</code> table now has 5 rows as we used 5
different parameter combinations in our simulation runs. The table
<code>parameter$definition</code> lacks the columns for the conditions
<code>plant</code> and <code>hsg</code> this time as we did not define
any parameter conditions this time.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_simn</span><span class="op">$</span><span class="va">parameter</span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 9</span></span></span>
<span><span class="co">#&gt;       cn2 lat_ttime lat_len  epco  esco perco     k    awc alpha</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  0.350      4.54    28.7  0.954 0.995 0.258  97.0   9.83 0.207</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>  5.32       3.68    22.0  0.399 0.806 0.131  57.4   7.23 0.756</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>  1.30       2.38    -<span style="color: #BB0000;">4.91</span> 0.650 0.468 0.758 -<span style="color: #BB0000;">17.6</span>  -<span style="color: #BB0000;">6.05</span> 0.207</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> -<span style="color: #BB0000;">4.37</span>       4.59    31.0  0.527 0.945 0.631  88.7  -<span style="color: #BB0000;">4.04</span> 0.591</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>  0.010<span style="text-decoration: underline;">4</span>     0.646   23.2  0.610 0.283 0.716  46.6 -<span style="color: #BB0000;">19.5</span>  0.288</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $definition</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 5</span></span></span>
<span><span class="co">#&gt;   par_name  parameter file_name change full_name                      </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> cn2       cn2       hru       abschg cn2.hru | change = abschg      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> lat_ttime lat_ttime hru       absval lat_ttime.hru | change = absval</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> lat_len   lat_len   hru       abschg lat_len.hru | change = abschg  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> epco      epco      hru       absval epco.hru | change = absval     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> esco      esco      hru       absval esco.hru | change = absval     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> perco     perco     hru       absval perco.hru | change = absval    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> k         k         sol       pctchg k.sol | change = pctchg        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> awc       awc       sol       pctchg awc.sol | change = pctchg      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> alpha     alpha     aqu       absval alpha.aqu | change = absval</span></span></code></pre></div>
<p>The major difference in the output list is given in the
<code>simulation</code> outputs. <code>simulation</code> is not a single
table as it was the case for the simulations with a single parameter
combination. In the case of multiple simulations with more than one
parameter combination a <code>list</code> of <code>tibbles</code> is
generated. As we can see for <code>q_simn$simulation</code> the output
is organized in three tables each table provides the simulation runs for
each output variable that we defined. Each table in this case has a
<code>date</code> column as its first column followed by the columns
<code>run_1</code> until <code>run_5</code> where each run provides the
simulation outputs for each of the 5 parameter combinations.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_simn</span><span class="op">$</span><span class="va">simulation</span></span>
<span><span class="co">#&gt; $q_sur</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,653 × 6</span></span></span>
<span><span class="co">#&gt;    date       run_1 run_2 run_3 run_4 run_5</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01 0.3   0.407 0.008 0.01  0.007</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02 0.064 0.093 0.001 0.002 0.001</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03 0.015 0.026 0.001 0.001 0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04 0.004 0.01  0     0     0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05 0.001 0.004 0     0     0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06 0     0.002 0     0     0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07 0     0.001 0     0     0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08 0     0.001 0     0     0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09 0     0.001 0     0     0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10 0     0     0     0     0    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 3,643 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $q_lat</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,653 × 6</span></span></span>
<span><span class="co">#&gt;    date       run_1 run_2 run_3 run_4 run_5</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01 0.03  0.025 0.013 0.019 0.015</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02 0.029 0.025 0.012 0.019 0.013</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03 0.029 0.024 0.012 0.019 0.012</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04 0.028 0.024 0.011 0.019 0.012</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05 0.028 0.023 0.011 0.019 0.011</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06 0.028 0.023 0.011 0.019 0.011</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07 0.027 0.023 0.01  0.019 0.011</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08 0.027 0.023 0.01  0.018 0.01 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09 0.027 0.022 0.01  0.018 0.01 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10 0.026 0.022 0.009 0.018 0.01 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 3,643 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $q_cha</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,653 × 6</span></span></span>
<span><span class="co">#&gt;    date        run_1  run_2  run_3   run_4 run_5</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01 0.083<span style="text-decoration: underline;">1</span> 0.107  0.095<span style="text-decoration: underline;">6</span> 0.012<span style="text-decoration: underline;">0</span>  0.125</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02 0.048<span style="text-decoration: underline;">3</span> 0.061<span style="text-decoration: underline;">6</span> 0.097<span style="text-decoration: underline;">6</span> 0.010<span style="text-decoration: underline;">7</span>  0.128</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03 0.034<span style="text-decoration: underline;">8</span> 0.041<span style="text-decoration: underline;">4</span> 0.100  0.009<span style="text-decoration: underline;">85</span> 0.132</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04 0.029<span style="text-decoration: underline;">4</span> 0.032<span style="text-decoration: underline;">7</span> 0.102  0.009<span style="text-decoration: underline;">30</span> 0.136</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05 0.025<span style="text-decoration: underline;">4</span> 0.029<span style="text-decoration: underline;">7</span> 0.104  0.009<span style="text-decoration: underline;">65</span> 0.138</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06 0.024<span style="text-decoration: underline;">9</span> 0.027<span style="text-decoration: underline;">9</span> 0.105  0.009<span style="text-decoration: underline;">23</span> 0.140</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07 0.023<span style="text-decoration: underline;">3</span> 0.025<span style="text-decoration: underline;">2</span> 0.106  0.008<span style="text-decoration: underline;">85</span> 0.141</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08 0.021<span style="text-decoration: underline;">9</span> 0.023<span style="text-decoration: underline;">3</span> 0.107  0.008<span style="text-decoration: underline;">49</span> 0.142</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09 0.020<span style="text-decoration: underline;">7</span> 0.021<span style="text-decoration: underline;">7</span> 0.108  0.008<span style="text-decoration: underline;">15</span> 0.144</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10 0.019<span style="text-decoration: underline;">5</span> 0.022<span style="text-decoration: underline;">0</span> 0.108  0.007<span style="text-decoration: underline;">82</span> 0.143</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 3,643 more rows</span></span></span></code></pre></div>
<p>Again we visualize the simulation results for the 5 parameter
combinations. For simplicity we again only use the outputs of
<em>‘flo_out’</em>. To better see any differences between the runs we
also only plot the year 2008. Without going into any details, we see
that substantial differences in the runoff peaks, recession and base
flow is visible. The plot example illustrates that the data structure of
the simulation outputs makes it easy to process the SWAT simulations in
any further analyses.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">q_plot</span> <span class="op">&lt;-</span> <span class="va">q_simn</span><span class="op">$</span><span class="va">simulation</span><span class="op">$</span><span class="va">q_cha</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="va">.</span>, cols <span class="op">=</span> <span class="op">-</span><span class="va">date</span>, names_to <span class="op">=</span> <span class="st">'run'</span>, values_to <span class="op">=</span> <span class="st">'flo_out'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">==</span> <span class="fl">2008</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">q_plot</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">flo_out</span>, col <span class="op">=</span> <span class="va">run</span>, linetype <span class="op">=</span> <span class="va">run</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">'Dark2'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="SWATrunR_files/figure-html/unnamed-chunk-34-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="setting-simulation-period-and-interval">Setting simulation period and interval<a class="anchor" aria-label="anchor" href="#setting-simulation-period-and-interval"></a>
</h2>
<p>Defining the simulation periods and the time intervals in which the
simulation results are printed are necessary settings in nearly every
SWAT simulation. <code><a href="../reference/run_swatplus.html">run_swatplus()</a></code> and
<code><a href="../reference/run_swat2012.html">run_swat2012()</a></code> provide some input arguments to define these
arguments for SWAT simulations. Most of the input arguments are the same
for SWAT+ and SWAT2012 simulations and only a few difference must be
considered.</p>
<p>You can control the simulation period with the two input arguments
<code>start_date</code> and <code>end_date</code> in
<code><a href="../reference/run_swatplus.html">run_swatplus()</a></code> and <code><a href="../reference/run_swat2012.html">run_swat2012()</a></code>. To skip a
certain number of simulations before printing outputs is an additional
argument that is usually defined together with the time frame for the
simulation. The reason to skip a few years of the the simulated time
series that should not be printed is to use these simulated years as a
warm up period to initiate state variables in the SWAT model run.
<code><a href="../reference/run_swatplus.html">run_swatplus()</a></code> and <code><a href="../reference/run_swat2012.html">run_swat2012()</a></code> provide the
input argument <code>years_skip</code> to define the number of years
that are not printed in the outputs. In the example below we define that
simulations should be performed between 2000-01-01 and 2005-12-31 where
the first 3 years are skipped for output printing.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim_set_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_swatplus.html">run_swatplus</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="va">path_plus</span>,</span>
<span>                             output <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span><span class="st">'channel_sd_day'</span>, <span class="st">'flo_out'</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                             start_date <span class="op">=</span> <span class="fl">20000101</span>,</span>
<span>                             end_date <span class="op">=</span> <span class="fl">20051231</span>,</span>
<span>                             years_skip <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; Building 1 thread in 'Define:/your/path/swatplus_demo/.model_run': </span></span>
<span><span class="co">#&gt;  Completed 1 thread in 0S                                                   </span></span>
<span><span class="co">#&gt; Performing 1 simulation on 1 core: </span></span>
<span><span class="co">#&gt;  Completed 1 simulation in 2S</span></span></code></pre></div>
<p>When we have a look at the simulated time series we can see that it
starts in the year 2003 and holds data for 3 years.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim_set_date</span></span>
<span><span class="co">#&gt; $simulation</span></span>
<span><span class="co">#&gt; $simulation$flo_out</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,096 × 2</span></span></span>
<span><span class="co">#&gt;    date        run_1</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01 0.092<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02 0.090<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03 0.091<span style="text-decoration: underline;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04 0.090<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05 0.091<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06 0.091<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07 0.092<span style="text-decoration: underline;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08 0.092<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09 0.092<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10 0.092<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 1,086 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info</span></span>
<span><span class="co">#&gt; $run_info$simulation_log</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">#&gt;   run_started         run_finished        run_time project_path          run_p…¹</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;Period&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2023-07-19 <span style="color: #949494;">11:03:48</span> 2023-07-19 <span style="color: #949494;">11:03:52</span> 4S       C:/Users/schuerz/Doc… C:/Use…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable name ¹​run_path</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info$simulation_period</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   start_date end_date   years_skip start_date_print</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2000-01-01 2005-12-31          3               <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info$output_definition</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 6</span></span></span>
<span><span class="co">#&gt;   name    file_full          file       time_interval variable unit </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> flo_out channel_sd_day.txt channel_sd day           flo_out  1</span></span></code></pre></div>
<p><code><a href="../reference/run_swatplus.html">run_swatplus()</a></code> provides an additional input argument to
define the date when output printing should be started. With
<code>start_date_print</code> you can define a date for which the first
outputs should be printed rather than defining the years that should be
skipped. This can be an advantage in some cases, but might be synonymous
to <code>years_skip</code> in many other cases. A situation where
<code>start_date_print</code> can be favored is when hydrological years
should be simulated rather than calendar years.
<code>years_skip</code>would in such cases simply skip the defined years
and starts printing at the first of January of the next year. With
<code>start_date_print</code> printing of outputs can e.g. be started at
October first if this is the start day of the hydrological year. The
example below shows the described difference between
<code>years_skip</code> and <code>start_date_print</code>.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim_yskip</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_swatplus.html">run_swatplus</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="va">path_plus</span>,</span>
<span>                          output <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span><span class="st">'channel_sd_day'</span>, <span class="st">'flo_out'</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                          start_date <span class="op">=</span> <span class="fl">20001101</span>,</span>
<span>                          end_date <span class="op">=</span> <span class="fl">20051031</span>,</span>
<span>                          years_skip <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; Building 1 thread in 'Define:/your/path/swatplus_demo/.model_run': </span></span>
<span><span class="co">#&gt;  Completed 1 thread in 0S                                                   </span></span>
<span><span class="co">#&gt; Performing 1 simulation on 1 core: </span></span>
<span><span class="co">#&gt;  Completed 1 simulation in 2S</span></span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim_stprint</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_swatplus.html">run_swatplus</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="va">path_plus</span>,</span>
<span>                            output <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span><span class="st">'channel_sd_day'</span>, <span class="st">'flo_out'</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                            start_date <span class="op">=</span> <span class="fl">20001101</span>,</span>
<span>                            end_date <span class="op">=</span> <span class="fl">20051031</span>,</span>
<span>                            start_date_print <span class="op">=</span> <span class="fl">20031101</span><span class="op">)</span></span>
<span><span class="co">#&gt; Building 1 thread in 'Define:/your/path/swatplus_demo/.model_run': </span></span>
<span><span class="co">#&gt;  Completed 1 thread in 0S                                                   </span></span>
<span><span class="co">#&gt; Performing 1 simulation on 1 core: </span></span>
<span><span class="co">#&gt;  Completed 1 simulation in 2S</span></span></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim_yskip</span></span>
<span><span class="co">#&gt; $simulation</span></span>
<span><span class="co">#&gt; $simulation$flo_out</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,035 × 2</span></span></span>
<span><span class="co">#&gt;    date        run_1</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01 0.092<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02 0.090<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03 0.090<span style="text-decoration: underline;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04 0.090<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05 0.091<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06 0.091<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07 0.092<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08 0.091<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09 0.092<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10 0.093<span style="text-decoration: underline;">0</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 1,025 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info</span></span>
<span><span class="co">#&gt; $run_info$simulation_log</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">#&gt;   run_started         run_finished        run_time project_path          run_p…¹</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;Period&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2023-07-19 <span style="color: #949494;">11:04:17</span> 2023-07-19 <span style="color: #949494;">11:04:21</span> 4S       C:/Users/schuerz/Doc… C:/Use…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable name ¹​run_path</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info$simulation_period</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   start_date end_date   years_skip start_date_print</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2000-11-01 2005-10-31          3               <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info$output_definition</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 6</span></span></span>
<span><span class="co">#&gt;   name    file_full          file       time_interval variable unit </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> flo_out channel_sd_day.txt channel_sd day           flo_out  1</span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim_stprint</span></span>
<span><span class="co">#&gt; $simulation</span></span>
<span><span class="co">#&gt; $simulation$flo_out</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 731 × 2</span></span></span>
<span><span class="co">#&gt;    date        run_1</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-11-01 0.034<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-11-02 0.034<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-11-03 0.035<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-11-04 0.037<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-11-05 0.036<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-11-06 0.036<span style="text-decoration: underline;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-11-07 0.036<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-11-08 0.037<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-11-09 0.037<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-11-10 0.037<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 721 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info</span></span>
<span><span class="co">#&gt; $run_info$simulation_log</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">#&gt;   run_started         run_finished        run_time project_path          run_p…¹</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;Period&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2023-07-19 <span style="color: #949494;">11:04:21</span> 2023-07-19 <span style="color: #949494;">11:04:25</span> 4S       C:/Users/schuerz/Doc… C:/Use…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable name ¹​run_path</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info$simulation_period</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   start_date end_date   years_skip start_date_print</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2000-11-01 2005-10-31         <span style="color: #BB0000;">NA</span> 2003-11-01      </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $run_info$output_definition</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 6</span></span></span>
<span><span class="co">#&gt;   name    file_full          file       time_interval variable unit </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> flo_out channel_sd_day.txt channel_sd day           flo_out  1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="parallel-processing-with-n_thread">Parallel processing with <code>n_thread</code><a class="anchor" aria-label="anchor" href="#parallel-processing-with-n_thread"></a>
</h2>
<p><code><a href="../reference/run_swatplus.html">run_swatplus()</a></code> and <code><a href="../reference/run_swat2012.html">run_swat2012()</a></code> provide
the option to perform SWAT simulations in parallel. When several
parameter combinations are defined for a SWAT run and passed to
<code>run_swat*()</code> with the argument <code>parameter</code>. The
simulations for the individual parameter combinations can be distributed
to individual cores of a computer. For a simple demonstartion of
parallel processing of simulation runs we will use the example from
above and define 16 parameter combinations this time.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">16</span></span>
<span></span>
<span><span class="va">par_set</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="st">'cn2.hru | change = abschg'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="op">-</span><span class="fl">15</span>,<span class="fl">10</span><span class="op">)</span>,</span>
<span>                  <span class="st">'lat_ttime.hru | change = absval'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="fl">0.5</span>,<span class="fl">5</span><span class="op">)</span>,</span>
<span>                  <span class="st">'lat_len.hru | change = abschg'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="op">-</span><span class="fl">10</span>,<span class="fl">50</span><span class="op">)</span>,</span>
<span>                  <span class="st">'epco.hru | change = absval'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="fl">0.1</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>                  <span class="st">'esco.hru | change = absval'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="fl">0.1</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>                  <span class="st">'perco.hru | change = absval'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="fl">0.1</span>,<span class="fl">0.8</span><span class="op">)</span>,</span>
<span>                  <span class="st">'k.sol | change = pctchg'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="op">-</span><span class="fl">20</span>,<span class="fl">100</span><span class="op">)</span>,</span>
<span>                  <span class="st">'awc.sol | change = pctchg'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="op">-</span><span class="fl">20</span>,<span class="fl">20</span><span class="op">)</span>,</span>
<span>                  <span class="st">'alpha.aqu | change = absval'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>,<span class="fl">0.1</span>,<span class="fl">0.8</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The only difference when we want to perform the simulations in
parallel is to define the number of cores with the input argument
<code>n_thread</code>. In the example below we define
<code>n_thread = 4</code>. This means that we use 4 cores of the
computer (if the computer has 4 cores, otherwise it uses the maximum
number) and always run 4 different parameter combinations in parallel.
We can see that the run time per parameter combination was reduced. How
large the reduction is depends on many parameters and is not always a
one-to-one reduction (i.e. doubling the number of cores does not
necessarily halve the run time).</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_simn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_swatplus.html">run_swatplus</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="va">path_plus</span>, </span>
<span>                       output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>q_cha <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">'channel_sd_day'</span>,</span>
<span>                                                           variable <span class="op">=</span> <span class="st">'flo_out'</span>,</span>
<span>                                                           unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                                     q_sur <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"basin_wb_day"</span>,</span>
<span>                                                           variable <span class="op">=</span> <span class="st">"surq_gen"</span>,</span>
<span>                                                           unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                                     q_lat <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"basin_wb_day"</span>,</span>
<span>                                                           variable <span class="op">=</span> <span class="st">"latq"</span>,</span>
<span>                                                           unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                       parameter <span class="op">=</span> <span class="va">par_set</span>,</span>
<span>                       n_thread <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt; Building 4 threads in 'Define:/your/path/swatplus_demo/.model_run':</span></span>
<span><span class="co">#&gt;  Thread 1 of 4   Time elapsed: 0S   Time remaining: 1S    </span></span>
<span><span class="co">#&gt;  Completed 4 thread in 1S</span></span>
<span><span class="co">#&gt; Performing 16 simulations on 4 cores:</span></span>
<span><span class="co">#&gt;  Simulation 8 of 16   Time elapsed: 22S   Time remaining: 20S</span></span>
<span><span class="co">#&gt;  Completed 16 simulations in 40S</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-parameter-subsets-with-run_index">Using parameter subsets with <code>run_index</code><a class="anchor" aria-label="anchor" href="#using-parameter-subsets-with-run_index"></a>
</h2>
<p>You might run into situations where you defined a set of parameter
combinations, but you only want to perform the simulations of a subset
of the defined combinations, for example:</p>
<ul>
<li>Splitting up a simulation task to perform it on several computers.
Then a set of e.g. 500 parameter combinations can be split into two
subsets where the same parameter set is used on both computers but on
machine 1 <code>run_index = 1:250</code>, while on the second one
<code>run_index = 251:500</code>.</li>
<li>Rerunning unsuccessful runs e.g. in case the computer crashed while
running simulations or specific parameter combinations caused errors in
the simulation. In this case you have to determine the missing runs and
can define <code>run_index</code> accordingly.</li>
<li>Performing case study simulations with parameter combinations that
were selected in the model calibration. In such a case we could also
keep the original parameter set and define the parameter combinations
that should be used in the case study simulations.</li>
</ul>
<p>In the following small example we assume that the simulations with
the parameter combinations 3,4,5 and 7 from the previous example failed
and we want to perform these simulations again. We can do this by
running the same code above again, but adding the input argument
<code>run_index</code>.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_simn_sub</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_swatplus.html">run_swatplus</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="va">path_plus</span>, </span>
<span>                           output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>q_cha <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">'channel_sd_day'</span>,</span>
<span>                                                               variable <span class="op">=</span> <span class="st">'flo_out'</span>,</span>
<span>                                                               unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                                         q_sur <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"basin_wb_day"</span>,</span>
<span>                                                               variable <span class="op">=</span> <span class="st">"surq_gen"</span>,</span>
<span>                                                               unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                                         q_lat <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"basin_wb_day"</span>,</span>
<span>                                                               variable <span class="op">=</span> <span class="st">"latq"</span>,</span>
<span>                                                               unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                           parameter <span class="op">=</span> <span class="va">par_set</span>,</span>
<span>                           run_index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>,</span>
<span>                           n_thread <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt; Building 4 threads in 'Define:/your/path/swatplus_demo/.model_run':</span></span>
<span><span class="co">#&gt;  Thread 1 of 4   Time elapsed: 0S   Time remaining: 1S    </span></span>
<span><span class="co">#&gt;  Completed 4 thread in 1S</span></span>
<span><span class="co">#&gt; Performing 4 simulations on 4 cores:</span></span>
<span><span class="co">#&gt;  Completed 4 simulations in 9S</span></span></code></pre></div>
<p>You may ask why you should use <code>run_index</code> and not
manually subset the parameter set before passing it to
<code><a href="../reference/run_swatplus.html">run_swatplus()</a></code>? When we compare the two cases you will see
one major difference. Below we perform the simulations with the same
parameter set, but we subset the parameter combinations before we pass
it to the SWAT simulations.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">par_subset</span> <span class="op">&lt;-</span> <span class="va">par_set</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">5</span>,<span class="fl">7</span><span class="op">)</span>, <span class="op">]</span></span>
<span></span>
<span><span class="va">q_simn_sub1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_swatplus.html">run_swatplus</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="va">path_plus</span>,</span>
<span>                            output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>q_cha <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">'channel_sd_day'</span>,</span>
<span>                                                                variable <span class="op">=</span> <span class="st">'flo_out'</span>,</span>
<span>                                                                unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                                          q_sur <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"basin_wb_day"</span>,</span>
<span>                                                                variable <span class="op">=</span> <span class="st">"surq_gen"</span>,</span>
<span>                                                                unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                                          q_lat <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"basin_wb_day"</span>,</span>
<span>                                                                variable <span class="op">=</span> <span class="st">"latq"</span>,</span>
<span>                                                                unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                            parameter <span class="op">=</span> <span class="va">par_subset</span>,</span>
<span>                            n_thread <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt; Building 4 threads in 'Define:/your/path/swatplus_demo/.model_run':</span></span>
<span><span class="co">#&gt;  Thread 1 of 4   Time elapsed: 0S   Time remaining: 1S    </span></span>
<span><span class="co">#&gt;  Completed 4 thread in 0S</span></span>
<span><span class="co">#&gt; Performing 4 simulations on 4 cores:</span></span>
<span><span class="co">#&gt;  Completed 4 simulations in 10S</span></span></code></pre></div>
<p>While the simulation runs in the first example where we used
<code>run_index</code> for subsetting ‘know’ that other parameter
combinations also exist, the simulations in the second example simply do
not have this information as we performed the subsetting outside of the
<code>run_swat*()</code> function. You can see the differences when
looking into the parameter sets that were saved for the simulation
runs.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_simn_sub</span><span class="op">$</span><span class="va">parameter</span><span class="op">$</span><span class="va">values</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 16 × 9</span></span></span>
<span><span class="co">#&gt;       cn2 lat_ttime lat_len  epco  esco perco      k     awc alpha</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  -<span style="color: #BB0000;">1.02</span>     2.92    32.8  0.807 0.393 0.154   5.01 -<span style="color: #BB0000;">18.6</span>   0.133</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  -<span style="color: #BB0000;">7.85</span>     1.39    -<span style="color: #BB0000;">9.12</span> 0.291 0.926 0.223  17.7   10.2   0.153</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> -<span style="color: #BB0000;">10.5</span>      1.50    34.9  0.208 0.170 0.113  77.7   -<span style="color: #BB0000;">9.14</span>  0.740</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  -<span style="color: #BB0000;">9.94</span>     2.47    11.2  0.596 0.200 0.361  48.8   13.9   0.650</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   9.15     1.44    40.4  0.492 0.452 0.210  24.7   -<span style="color: #BB0000;">8.91</span>  0.778</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  -<span style="color: #BB0000;">9.81</span>     3.71    48.0  0.703 0.774 0.162  22.4   -<span style="color: #BB0000;">0.192</span> 0.492</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   7.80     2.49    -<span style="color: #BB0000;">5.98</span> 0.439 0.503 0.532  35.1   -<span style="color: #BB0000;">5.16</span>  0.800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  -<span style="color: #BB0000;">8.82</span>     3.92    19.6  0.703 0.754 0.781  57.9   17.7   0.715</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  -<span style="color: #BB0000;">3.10</span>     4.94    -<span style="color: #BB0000;">6.67</span> 0.891 0.935 0.550  70.3   -<span style="color: #BB0000;">7.56</span>  0.490</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   2.26     0.692    9.64 0.205 0.427 0.707 -<span style="color: #BB0000;">17.7</span>   17.0   0.665</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>  -<span style="color: #BB0000;">8.61</span>     4.60    42.6  0.831 0.955 0.536  -<span style="color: #BB0000;">4.34</span> -<span style="color: #BB0000;">14.6</span>   0.474</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> -<span style="color: #BB0000;">12.5</span>      2.05    -<span style="color: #BB0000;">4.46</span> 0.672 0.447 0.759  41.7    8.72  0.440</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>   2.00     4.60     2.22 0.804 0.448 0.130 -<span style="color: #BB0000;">11.8</span>   -<span style="color: #BB0000;">0.957</span> 0.671</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span>  -<span style="color: #BB0000;">1.64</span>     2.65    12.5  0.176 0.980 0.470  -<span style="color: #BB0000;">1.64</span>  13.9   0.587</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span>   2.80     3.36    20.7  0.534 0.651 0.635  21.6   15.7   0.342</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span>  -<span style="color: #BB0000;">5.90</span>     1.25     7.06 0.389 0.292 0.782  13.8    3.97  0.264</span></span></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_simn_sub1</span><span class="op">$</span><span class="va">parameter</span><span class="op">$</span><span class="va">values</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 9</span></span></span>
<span><span class="co">#&gt;      cn2 lat_ttime lat_len  epco  esco perco     k   awc alpha</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> -<span style="color: #BB0000;">10.5</span>       1.50   34.9  0.208 0.170 0.113  77.7 -<span style="color: #BB0000;">9.14</span> 0.740</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>  -<span style="color: #BB0000;">9.94</span>      2.47   11.2  0.596 0.200 0.361  48.8 13.9  0.650</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>   9.15      1.44   40.4  0.492 0.452 0.210  24.7 -<span style="color: #BB0000;">8.91</span> 0.778</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>   7.80      2.49   -<span style="color: #BB0000;">5.98</span> 0.439 0.503 0.532  35.1 -<span style="color: #BB0000;">5.16</span> 0.800</span></span></code></pre></div>
<p><code>q_simn_sub</code> still stores all 16 parameter combinations
although we used only four and <code>q_simn_sub1</code> only got the
information on four parameter combinations. Further, the naming of the
simulation runs is different in the two examples as shown below for the
results of <code>qsur</code>.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_simn_sub</span><span class="op">$</span><span class="va">simulation</span><span class="op">$</span><span class="va">q_sur</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,653 × 5</span></span></span>
<span><span class="co">#&gt;    date       run_03 run_04 run_05 run_07</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01  0.307  0.189  0.507  0.186</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02  0.065  0.036  0.139  0.058</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03  0.015  0.008  0.052  0.026</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04  0.004  0.002  0.025  0.014</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05  0.001  0.001  0.014  0.009</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06  0      0      0.009  0.005</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07  0      0      0.006  0.003</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08  0      0      0.004  0.002</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09  0      0      0.002  0.001</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10  0      0      0.002  0.001</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 3,643 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_simn_sub1</span><span class="op">$</span><span class="va">simulation</span><span class="op">$</span><span class="va">q_sur</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,653 × 5</span></span></span>
<span><span class="co">#&gt;    date       run_1 run_2 run_3 run_4</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2003-01-01 0.307 0.189 0.507 0.186</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2003-01-02 0.065 0.036 0.139 0.058</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2003-01-03 0.015 0.008 0.052 0.026</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2003-01-04 0.004 0.002 0.025 0.014</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2003-01-05 0.001 0.001 0.014 0.009</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2003-01-06 0     0     0.009 0.005</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2003-01-07 0     0     0.006 0.003</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2003-01-08 0     0     0.004 0.002</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2003-01-09 0     0     0.002 0.001</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2003-01-10 0     0     0.002 0.001</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 3,643 more rows</span></span></span></code></pre></div>
<p>The simulations that used <code>run_index</code> for subsetting
preserved the initial run numbers in the naming. Thus, when you want to
merge the runs of the subset with previous runs, the names of the
simulations always match the corresponding parameter combinations in the
initially defined parameter set. In the second example you can see that
the runs are called <code>run_1</code> to <code>run_4</code>. The
function <code><a href="../reference/run_swatplus.html">run_swatplus()</a></code> only received 4 parameter
combinations as input and used all parameter combinations 1 to 4.
Merging these runs with other runs for the same parameter set requires
you to rename the runs. This is however a potential source for
errors.</p>
</div>
<div class="section level2">
<h2 id="saving-simulation-outputs-with-save_file">Saving simulation outputs with <code>save_file</code><a class="anchor" aria-label="anchor" href="#saving-simulation-outputs-with-save_file"></a>
</h2>
<p><code>run_swat*()</code> provides the option to immediately save
simulation outputs in SQLite date bases after each simulation with a
parameter set was performed. This option is useful in many cases, such
as</p>
<ul>
<li>Performance of time consuming simulation experiments with a large
number of parameter combinations. Performing many simulations bears the
risk of errors in single simulations. When you run these simulations and
a single run results in an unsolvable error <code>run_swat*()</code> may
return an error and would not return any simulation results. Thus,
computation time would be simply lost time and the simulations must be
repeated.</li>
<li>Performing simulations where the entire list of simulation outputs
for all parameter combinations would not fit into the computers RAM. In
this case the simulations can be saved incrementally to data bases and
would not fill up the RAM (if the input argument
<code>return_output = FALSE</code>. See the example below).</li>
<li>Splitting simulations to run on several computers and merging them
later on one machine. The <code>SWATrunR</code> function
<code><a href="../reference/load_swat_run.html">load_swat_run()</a></code> can access the results that were saved in
multiple data bases to merge them and return them in R as a single
simulation output. Thus, <code>SWATrunR</code> facilitates a user
friendly workflow to split simulations and merge the outputs for the
analysis.</li>
</ul>
<p>To incrementally save simulation outputs you just define the name of
your simulation output with the input argument <code>save_file</code>.
Running the simulations with <code>run_swat*()</code> then generates a
folder with this name in the <code>project_path</code> that contains
multiple SQLite data bases which store the simulations runs. You can see
yourself when you run the following simulations on your computer and
have a look into your SWAT project folder. For this example we will
again use the parameter set that we generated above and simply extend
the execution of <code><a href="../reference/run_swatplus.html">run_swatplus()</a></code> from above with
<code>run_file = q_sim_1_16</code> (The name indicates that this save
folder contains the simulations 1 to 16 for this simulation project).
Below you can also see that we do not assign the function call of
<code><a href="../reference/run_swatplus.html">run_swatplus()</a></code> to any variable and that we also added the
input argument <code>return_output = FALSE</code>. With
<code>return_output = FALSE</code> no simulation results will be
returned back to <code>R</code> and all simulation results are only
saved in the data bases. You can of course still keep both when setting
<code>return_output = TRUE</code> and assigning the outputs to a
variable in <code>R</code>. In this case you would have the simulation
outputs directly saved in the RAM and the <code>R</code> working
environment and as a backup in the SQLite data bases.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/run_swatplus.html">run_swatplus</a></span><span class="op">(</span>project_path <span class="op">=</span> <span class="va">path_plus</span>,</span>
<span>             output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>q_cha <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">'channel_sd_day'</span>,</span>
<span>                                                 variable <span class="op">=</span> <span class="st">'flo_out'</span>,</span>
<span>                                                 unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                           q_sur <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"basin_wb_day"</span>,</span>
<span>                                                 variable <span class="op">=</span> <span class="st">"surq_gen"</span>,</span>
<span>                                                 unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                           q_lat <span class="op">=</span> <span class="fu"><a href="../reference/define_output.html">define_output</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"basin_wb_day"</span>,</span>
<span>                                                 variable <span class="op">=</span> <span class="st">"latq"</span>,</span>
<span>                                                 unit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>             parameter <span class="op">=</span> <span class="va">par_set</span>,</span>
<span>             save_file <span class="op">=</span> <span class="st">'q_sim_1_16'</span>,</span>
<span>             return_output <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>             n_thread <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt; Building 4 threads in 'Define:/your/path/swatplus_demo/.model_run':</span></span>
<span><span class="co">#&gt;  Thread 1 of 1   Time elapsed: 0S   Time remaining: 1S    </span></span>
<span><span class="co">#&gt;  Completed 4 thread in 1S</span></span>
<span><span class="co">#&gt; Performing 4 simulations on 4 cores:</span></span>
<span><span class="co">#&gt;  Completed 4 simulations in 36S</span></span></code></pre></div>
<p>You can probably see that the simulation time slightly increased.
While it is safer to incrementally save your simulations. The
incremental saving can result in significantly longer computation times
as writing the simulations to the hard drive can take a while.</p>
<p>With <code><a href="../reference/load_swat_run.html">load_swat_run()</a></code> you can load the simulations from
the saved files. You just have to provide the path of the saved folder
<em>q_sim_1_16</em> on your hard drive to load them in
<code>R</code>.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a>q_saved <span class="ot">&lt;-</span> <span class="fu">load_swat_run</span>(<span class="at">save_dir =</span> <span class="fu">paste</span>(path_plus, <span class="st">'q_sim_1_16'</span>, <span class="at">sep =</span> <span class="st">'/'</span>))</span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a><span class="co">#&gt; Scan saved runs...Done!</span></span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a><span class="co">#&gt; Read variables...</span></span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">3</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-6"><a href="#cb46-6" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">6</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-7"><a href="#cb46-7" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">9</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-8"><a href="#cb46-8" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">12</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-9"><a href="#cb46-9" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">16</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-10"><a href="#cb46-10" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">19</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-11"><a href="#cb46-11" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">22</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-12"><a href="#cb46-12" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">25</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-13"><a href="#cb46-13" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">28</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-14"><a href="#cb46-14" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">31</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-15"><a href="#cb46-15" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">34</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-16"><a href="#cb46-16" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">38</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-17"><a href="#cb46-17" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">41</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-18"><a href="#cb46-18" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">44</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-19"><a href="#cb46-19" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">47</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-20"><a href="#cb46-20" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">50</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-21"><a href="#cb46-21" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">53</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-22"><a href="#cb46-22" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">56</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-23"><a href="#cb46-23" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">59</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-24"><a href="#cb46-24" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">62</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-25"><a href="#cb46-25" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">66</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-26"><a href="#cb46-26" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">69</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-27"><a href="#cb46-27" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">72</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-28"><a href="#cb46-28" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">75</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-29"><a href="#cb46-29" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">78</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-30"><a href="#cb46-30" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">81</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-31"><a href="#cb46-31" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">84</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-32"><a href="#cb46-32" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">88</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-33"><a href="#cb46-33" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">91</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-34"><a href="#cb46-34" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">94</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-35"><a href="#cb46-35" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">97</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-36"><a href="#cb46-36" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">100</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb46-37"><a href="#cb46-37" tabindex="-1"></a>                                                                            </span>
<span id="cb46-38"><a href="#cb46-38" tabindex="-1"></a> Completed <span class="dv">32</span> Tables <span class="cf">in</span> 0S </span>
<span id="cb46-39"><a href="#cb46-39" tabindex="-1"></a><span class="co">#&gt; Return simulation results...Done!</span></span></code></pre></div>
<p>You can see that the structure of the loaded simulations is the same
as the one that you would get when running the simulations and directly
returning them to <code>R</code>. The loaded simulations again store the
<code>parameter$values</code> and the <code>parameter$definition</code>
together with the <code>simulation</code> of the three defined output
variables.</p>
<p>If you want to analyze a large simulation project where you cannot
load the entire simulation output into the RAM you can also load
specific variables and selected runs. You can also omit to add the
parameter information. In the following example we only load the
simulation outputs for <code>q_sur</code> and only the first 5
simulations. Additionally, we will not add the parameter
information.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a>qsur_1_5 <span class="ot">&lt;-</span> <span class="fu">load_swat_run</span>(<span class="at">save_dir =</span> <span class="fu">paste</span>(path_plus, <span class="st">'q_sim_1_16'</span>, <span class="at">sep =</span> <span class="st">'/'</span>), </span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a>                          <span class="at">variable =</span> <span class="st">'q_sur'</span>,</span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a>                          <span class="at">run =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, </span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a>                          <span class="at">add_parameter =</span> <span class="cn">FALSE</span>)</span>
<span id="cb47-5"><a href="#cb47-5" tabindex="-1"></a><span class="co">#&gt; Scan saved runs...Done!</span></span>
<span id="cb47-6"><a href="#cb47-6" tabindex="-1"></a><span class="co">#&gt; Read variables...</span></span>
<span id="cb47-7"><a href="#cb47-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb47-8"><a href="#cb47-8" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">10</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb47-9"><a href="#cb47-9" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">20</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb47-10"><a href="#cb47-10" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">30</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb47-11"><a href="#cb47-11" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">40</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb47-12"><a href="#cb47-12" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">50</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb47-13"><a href="#cb47-13" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">60</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb47-14"><a href="#cb47-14" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">70</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb47-15"><a href="#cb47-15" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">80</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb47-16"><a href="#cb47-16" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">90</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb47-17"><a href="#cb47-17" tabindex="-1"></a> Progress<span class="sc">:</span> <span class="dv">100</span>%   Time elapsed<span class="sc">:</span> 0S   Time remaining<span class="sc">:</span> 0S    </span>
<span id="cb47-18"><a href="#cb47-18" tabindex="-1"></a>                                                                            </span>
<span id="cb47-19"><a href="#cb47-19" tabindex="-1"></a> Completed <span class="dv">10</span> Tables <span class="cf">in</span> 0S </span>
<span id="cb47-20"><a href="#cb47-20" tabindex="-1"></a><span class="co">#&gt; Return simulation results...Done!</span></span>
<span id="cb47-21"><a href="#cb47-21" tabindex="-1"></a></span>
<span id="cb47-22"><a href="#cb47-22" tabindex="-1"></a>qsur_1_5</span>
<span id="cb47-23"><a href="#cb47-23" tabindex="-1"></a><span class="co">#&gt; $simulation</span></span>
<span id="cb47-24"><a href="#cb47-24" tabindex="-1"></a><span class="co">#&gt; $simulation$q_sur</span></span>
<span id="cb47-25"><a href="#cb47-25" tabindex="-1"></a><span class="co">#&gt;  [38;5;246m# A tibble: 3,653 × 5 [39m</span></span>
<span id="cb47-26"><a href="#cb47-26" tabindex="-1"></a><span class="co">#&gt;    run_01 run_02 run_03 run_04 run_05</span></span>
<span id="cb47-27"><a href="#cb47-27" tabindex="-1"></a><span class="co">#&gt;      [3m [38;5;246m&lt;dbl&gt; [39m [23m   [3m [38;5;246m&lt;dbl&gt; [39m [23m   [3m [38;5;246m&lt;dbl&gt; [39m [23m   [3m [38;5;246m&lt;dbl&gt; [39m [23m   [3m [38;5;246m&lt;dbl&gt; [39m [23m</span></span>
<span id="cb47-28"><a href="#cb47-28" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m 1 [39m  0.377  0.242  0.307  0.189  0.507</span></span>
<span id="cb47-29"><a href="#cb47-29" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m 2 [39m  0.082  0.051  0.065  0.036  0.139</span></span>
<span id="cb47-30"><a href="#cb47-30" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m 3 [39m  0.02   0.012  0.015  0.008  0.052</span></span>
<span id="cb47-31"><a href="#cb47-31" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m 4 [39m  0.005  0.003  0.004  0.002  0.025</span></span>
<span id="cb47-32"><a href="#cb47-32" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m 5 [39m  0.002  0.001  0.001  0.001  0.014</span></span>
<span id="cb47-33"><a href="#cb47-33" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m 6 [39m  0.001  0      0      0      0.009</span></span>
<span id="cb47-34"><a href="#cb47-34" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m 7 [39m  0      0      0      0      0.006</span></span>
<span id="cb47-35"><a href="#cb47-35" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m 8 [39m  0      0      0      0      0.004</span></span>
<span id="cb47-36"><a href="#cb47-36" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m 9 [39m  0      0      0      0      0.002</span></span>
<span id="cb47-37"><a href="#cb47-37" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m10 [39m  0      0      0      0      0.002</span></span>
<span id="cb47-38"><a href="#cb47-38" tabindex="-1"></a><span class="co">#&gt;  [38;5;246m# … with 3,643 more rows [39m</span></span>
<span id="cb47-39"><a href="#cb47-39" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb47-40"><a href="#cb47-40" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb47-41"><a href="#cb47-41" tabindex="-1"></a><span class="co">#&gt; $run_info</span></span>
<span id="cb47-42"><a href="#cb47-42" tabindex="-1"></a><span class="co">#&gt; $run_info$simulation_log</span></span>
<span id="cb47-43"><a href="#cb47-43" tabindex="-1"></a><span class="co">#&gt;  [38;5;246m# A tibble: 1 × 5 [39m</span></span>
<span id="cb47-44"><a href="#cb47-44" tabindex="-1"></a><span class="co">#&gt;   run_started         run_finished        run_time project_path          run_p…¹</span></span>
<span id="cb47-45"><a href="#cb47-45" tabindex="-1"></a><span class="co">#&gt;    [3m [38;5;246m&lt;dttm&gt; [39m [23m               [3m [38;5;246m&lt;dttm&gt; [39m [23m               [3m [38;5;246m&lt;chr&gt; [39m [23m     [3m [38;5;246m&lt;chr&gt; [39m [23m                  [3m [38;5;246m&lt;chr&gt; [39m [23m  </span></span>
<span id="cb47-46"><a href="#cb47-46" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m1 [39m 2023-07-19  [38;5;246m11:08:31 [39m 2023-07-19  [38;5;246m11:09:27 [39m 56S      C:/Users/schuerz/Doc… C:/Use…</span></span>
<span id="cb47-47"><a href="#cb47-47" tabindex="-1"></a><span class="co">#&gt;  [38;5;246m# … with abbreviated variable name ¹​run_path [39m</span></span>
<span id="cb47-48"><a href="#cb47-48" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb47-49"><a href="#cb47-49" tabindex="-1"></a><span class="co">#&gt; $run_info$simulation_period</span></span>
<span id="cb47-50"><a href="#cb47-50" tabindex="-1"></a><span class="co">#&gt;  [38;5;246m# A tibble: 1 × 4 [39m</span></span>
<span id="cb47-51"><a href="#cb47-51" tabindex="-1"></a><span class="co">#&gt;   start_date end_date   years_skip start_date_print</span></span>
<span id="cb47-52"><a href="#cb47-52" tabindex="-1"></a><span class="co">#&gt;    [3m [38;5;246m&lt;date&gt; [39m [23m      [3m [38;5;246m&lt;date&gt; [39m [23m           [3m [38;5;246m&lt;int&gt; [39m [23m  [3m [38;5;246m&lt;date&gt; [39m [23m          </span></span>
<span id="cb47-53"><a href="#cb47-53" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m1 [39m 2000-01-01 2012-12-31          3  [31mNA [39m              </span></span>
<span id="cb47-54"><a href="#cb47-54" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb47-55"><a href="#cb47-55" tabindex="-1"></a><span class="co">#&gt; $run_info$output_definition</span></span>
<span id="cb47-56"><a href="#cb47-56" tabindex="-1"></a><span class="co">#&gt;  [38;5;246m# A tibble: 3 × 6 [39m</span></span>
<span id="cb47-57"><a href="#cb47-57" tabindex="-1"></a><span class="co">#&gt;   name  file_full          file       time_interval variable unit </span></span>
<span id="cb47-58"><a href="#cb47-58" tabindex="-1"></a><span class="co">#&gt;    [3m [38;5;246m&lt;chr&gt; [39m [23m  [3m [38;5;246m&lt;chr&gt; [39m [23m               [3m [38;5;246m&lt;chr&gt; [39m [23m       [3m [38;5;246m&lt;chr&gt; [39m [23m          [3m [38;5;246m&lt;chr&gt; [39m [23m     [3m [38;5;246m&lt;chr&gt; [39m [23m</span></span>
<span id="cb47-59"><a href="#cb47-59" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m1 [39m q_cha channel_sd_day.txt channel_sd day           flo_out  1    </span></span>
<span id="cb47-60"><a href="#cb47-60" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m2 [39m q_sur basin_wb_day.txt   basin_wb   day           surq_gen 1    </span></span>
<span id="cb47-61"><a href="#cb47-61" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m3 [39m q_lat basin_wb_day.txt   basin_wb   day           latq     1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="alternative-paths-for-running-and-saving-simulations">Alternative paths for running and saving simulations<a class="anchor" aria-label="anchor" href="#alternative-paths-for-running-and-saving-simulations"></a>
</h2>
<p>Default <code>run_swat*()</code> performs simulations in the folder
<em>.model_run</em> that is generated in the SWAT project folder and
incrementally saves simulation outputs in a folder that is named with
the input argument <code>save_file</code> in the SWAT project folder.
<code>run_swat*()</code> provides the option that simulations are
performed in a different location and simulation results are saved in a
path that is different to the <code>project_path</code>. These two
options can be defined with the input arguments <code>run_path</code>
and <code>save_path</code>. These options can be useful if the original
project is for example located on a small or slow drive and the
simulations or the saving of simulations should be performed on a
different drive where storage is not limiting or reading/writing is much
faster.</p>
</div>
<div class="section level2">
<h2 id="adding-parameters-and-dates-to-outputs-quiet-option">Adding parameters and dates to outputs, quiet option<a class="anchor" aria-label="anchor" href="#adding-parameters-and-dates-to-outputs-quiet-option"></a>
</h2>
<p>In some cases it can be useful to not add a date column or the
parameter information to the simulation outputs. One example could be
that the simulation output should be directly used in an optimization
routine. Then the only output of interest might be the vector of the
simulated variable and returning the other information is obsolete. You
can activate these options with the input arguments
<code>add_date</code> and <code>add_parameter</code>.</p>
<p>The <code>quiet</code> option can be useful when
<code>run_swat*()</code> is used in specific workflows such as
optimization. In this case showing the, in other cases useful
information on the run progress, for each simulation is annoying. With
<code>quiet = TRUE</code> <code>run_swat*()</code> remains quiet while
running.</p>
</div>
<div class="section level2">
<h2 id="keeping-and-refreshing-the-simulation-folders">Keeping and refreshing the simulation folders<a class="anchor" aria-label="anchor" href="#keeping-and-refreshing-the-simulation-folders"></a>
</h2>
<p>The simulation folders are by default deleted after simulations were
successful. You may however want to keep the simulation folder after a
simulation was performed, e.g. because you want to check the simulation
folder for any errors, or you want to keep the simulation folder that
uses a certain model parameterization. The folder will not be deleted
after a successful simulation if you define the input argument
<code>keep_folder = TRUE</code>.</p>
<p>If you set <code>keep_folder = TRUE</code> and
<code>refresh = FALSE</code> you can additionally force the new model
runs after one successful round of model runs to not rewrite the
<em>.model_run</em> folder. <strong>This option can make sense for
SWAT2012 projects and should be used very carefully!</strong> Generating
many parallel thread folders for large SWAT2012 projects can be very
time consuming and reusing the parallel folders can be usefule. In this
case the parameter changes that were performed in the previous
simulations are still contained in the thread folders in
<em>.model_run</em>. This can be a problem when rerunning a SWAT2012
project with other parameters than in the previous runs. Parameters that
were changed in the previous runs but will not be changed in the new
runs keep the last changes that were assigned to these parameters (that
are all different in the thread folders!).</p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body">
<div id="ref-Bosch2007" class="csl-entry">
Bosch, D. D., Sheridan, J. M., Lowrance, R. R., Hubbard, R. K.,
Strickland, T. C., Feyereisen, G. W. and Sullivan, D. G.: Little river
experimental watershed database, Water Resources Research, 43(9), doi:<a href="https://doi.org/10.1029/2006wr005844" class="external-link">10.1029/2006wr005844</a>,
2007.
</div>
<div id="ref-Mueller2019" class="csl-entry">
Müller, K. and Wickham, H.: Tibble: Simple data frames. [online]
Available from: <a href="https://CRAN.R-project.org/package=tibble" class="external-link">https://CRAN.R-project.org/package=tibble</a>
(Accessed 5 March 2019), 2019.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/chrisschuerz" class="external-link">Christoph Schuerz</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
